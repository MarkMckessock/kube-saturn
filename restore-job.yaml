apiVersion: batch/v1
kind: Job
metadata:
  name: restore-overseerr
  namespace: media
spec:
  template:
    spec:
      containers:
        - name: backup
          image: ubuntu
          command:
            - /bin/bash
            - -c
          args:
            [
              "rm -rf /dst/* && tar -xzvf /backups/media_overseerr.tar.gz --strip-components 1 -C /dst",
            ]
          volumeMounts:
            - mountPath: /dst
              name: pvc
            - mountPath: /backups
              name: backups
      restartPolicy: Never
      volumes:
        - name: pvc
          persistentVolumeClaim:
            claimName: overseerr-config
        - name: backups
          nfs:
            path: /volume1/Backups/Homelab Backups/03-01-2023-pvc-backup
            server: granite.markmckessock.com
