---
# yaml-language-server: $schema=https://taskfile.dev/schema.json
version: "3"

set: [pipefail]
shopt: [globstar]

vars:
  KUBERNETES_DIR: "{{.ROOT_DIR}}/kubernetes"
  SCRIPTS_DIR: '{{.ROOT_DIR}}/scripts'
  TALOS_DIR: '{{.ROOT_DIR}}/talos'

dotenv:
  - '{{.ROOT_DIR}}/onepassword.env'
  - '{{.KUBERNETES_DIR}}/apps/system-upgrade/versions.env'

env:
  # KUBECONFIG: "{{.ROOT_DIR}}/kubeconfig"
  TALOSCONFIG: '{{.ROOT_DIR}}/talosconfig'


includes:
  ansible: .taskfiles/AnsibleTasks.yml
  cluster: .taskfiles/ClusterTasks.yml
  precommit: .taskfiles/PrecommitTasks.yml
  terraform: .taskfiles/TerraformTasks.yml
  pvc: .taskfiles/PVCTasks.yaml
  cnpg: .taskfiles/CloudnativePg/Tasks.yaml
  volsync: .taskfiles/volsync/TaskFile.yaml
  workstation: .taskfiles/workstation
  talos: .taskfiles/talos
  bootstrap: .taskfiles/bootstrap

tasks:
  default:
    cmd: task --list
    silent: true
