---
apiVersion: v1
kind: Pod
metadata:
  name: test-pvc
  namespace: media
spec:
  containers:
    - name: test-pod
      image: ubuntu
      command:
        [
          "/bin/bash",
          "-c",
          "apt update && apt install -y wget rsync tmux nano && rsync -rhavP /source/* /dest",
        ]
      volumeMounts:
        - mountPath: /basalt
          name: basalt
        - mountPath: /granite
          name: granite
      resources:
        limits:
          memory: "128Mi"
          cpu: "500m"
  volumes:
    - name: granite
      nfs:
        server: granite.markmckessock.com
        path: /volume1/Media
    - name: basalt
      nfs:
        server: basalt.markmckessock.com
        path: /volume1/Media
  restartPolicy: Never
